<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iBandbyte — Artists</title>
  <style>
    :root{
      --byte:#FFB100;
      --ink:#0A0A0A;
      --cardGrad1:#6a11cb; /* purple */
      --cardGrad2:#ff6600; /* orange */
      --panel:#161616;
      --chip:#2a2227;
      --soft:#999;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:28px 20px 60px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff; background:#111;
    }
    header{
      max-width:980px; margin:0 auto 18px;
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px; flex:0 0 44px;
      display:grid; place-items:center; background:#1b1b1b; overflow:hidden;
      box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .logo img{width:100%; height:100%; object-fit:cover}
    .brand{font-weight:800; font-size:34px; letter-spacing:.2px; line-height:1}
    .brand .iband{color:#fff}
    .brand .byte{color:var(--byte)}

    .controls{max-width:980px; margin:6px auto 18px}
    .search-row{display:flex; gap:12px; align-items:center}
    input[type="text"]{
      flex:1; padding:14px 16px; border:none; outline:none; color:#fff;
      background:#222; border-radius:10px; font-size:16px;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .btn{
      padding:12px 18px; border:none; border-radius:10px; color:#fff; cursor:pointer;
      font-weight:700; letter-spacing:.2px;
      background:linear-gradient(90deg, var(--cardGrad1), var(--cardGrad2));
      box-shadow:0 6px 18px rgba(0,0,0,.35);
    }
    .btn:disabled{opacity:.5; cursor:not-allowed}

    .wrap{max-width:980px; margin:0 auto}
    .card-link{display:block; text-decoration:none; color:inherit}
    .card{
      background:linear-gradient(145deg, var(--cardGrad1), var(--cardGrad2));
      border-radius:var(--radius); padding:22px; margin:16px 0; color:#fff;
      box-shadow:0 10px 28px rgba(0,0,0,.45);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .card:hover{transform:translateY(-2px); box-shadow:0 16px 34px rgba(0,0,0,.55)}
    .row{display:flex; align-items:center; gap:14px; margin-bottom:8px}
    .avatar{
      width:64px; height:64px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ffd79a, #ff9f6b 50%, #ff7f50 70%);
      display:grid; place-items:center; font-weight:900; font-size:22px; color:#2b1a12;
      box-shadow:inset 0 0 0 2px rgba(255,255,255,.35), 0 6px 18px rgba(0,0,0,.25);
      flex:0 0 64px;
    }
    .name{font-size:28px; font-weight:800; margin:0}
    .genre{margin:6px 0 14px; color:#f3f3f3; font-size:18px}
    .chips{display:flex; gap:10px; flex-wrap:wrap}
    .chip{
      background:var(--chip); color:#f0e6e9; padding:8px 12px; border-radius:100px;
      font-size:13px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
    }

    /* Pagination */
    .pager{
      max-width:980px; margin:14px auto 0; display:flex; gap:10px; align-items:center; justify-content:center;
    }
    .pager .info{color:var(--soft); font-size:14px; padding:8px 10px}
    .pager .pbtn{
      padding:10px 14px; border-radius:10px; border:none; cursor:pointer; color:#fff;
      background:#2b2b2b; box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .pager .pbtn[disabled]{opacity:.45; cursor:not-allowed}

    footer{max-width:980px; margin:26px auto 0; color:#bbb; text-align:center; font-size:13px}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; color:#ccc}
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <!-- Your official orb mark -->
      <img
        alt="iBandbyte logo"
        src="https://raw.githubusercontent.com/IBandbyte/assets/main/branding/orb-logo-64.png"
        onerror="this.style.display='none';"
      />
    </div>
    <div class="brand"><span class="iband">iBand</span><span class="byte">byte</span></div>
  </header>

  <section class="controls">
    <div class="search-row">
      <input id="q" type="text" placeholder="Search artists… (e.g. Drake, pop)" />
      <button id="refreshBtn" class="btn">Refresh</button>
    </div>
  </section>

  <main class="wrap" id="list"></main>

  <nav class="pager" aria-label="Pagination">
    <button id="prev" class="pbtn" disabled>◀︎ Prev</button>
    <span id="pageInfo" class="info">Page 1 of 1</span>
    <button id="next" class="pbtn" disabled>Next ▶︎</button>
  </nav>

  <footer>© 2025 <span class="brand"><span class="iband">iBand</span><span class="byte">byte</span></span>. All rights reserved.</footer>

  <script>
    // ===== CONFIG =====
    const BACKEND_URL = "https://iband-backend-first-2.onrender.com/artists";
    const PAGE_SIZE   = 24; // change to 12/18/etc anytime

    // ===== STATE =====
    let rawData = [];        // original list from server
    let filtered = [];       // list after search filter
    let currentPage = 1;     // 1-based

    // ===== HELPERS =====
    const $ = (sel) => document.querySelector(sel);

    function firstLetter(name="") {
      const t = (name || "").trim();
      return t ? t[0].toUpperCase() : "?";
    }

    function slugify(s=""){
      return encodeURIComponent((s||"").trim().toLowerCase());
    }

    function applyFilter(term){
      const q = (term || "").trim().toLowerCase();
      if(!q){ filtered = [...rawData]; return; }
      filtered = rawData.filter(a =>
        (a.name||"").toLowerCase().includes(q) ||
        (a.genre||"").toLowerCase().includes(q)
      );
    }

    function totalPages(){
      return Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));
    }

    function clampPage(){
      const max = totalPages();
      if(currentPage < 1) currentPage = 1;
      if(currentPage > max) currentPage = max;
    }

    function pageSlice(){
      const start = (currentPage - 1) * PAGE_SIZE;
      return filtered.slice(start, start + PAGE_SIZE);
    }

    // ===== RENDER =====
    function renderList(){
      const container = $("#list");
      container.innerHTML = "";

      const items = pageSlice();
      if(items.length === 0){
        container.innerHTML = `<p class="mono">No results.</p>`;
        return;
      }

      const frag = document.createDocumentFragment();
      for(const a of items){
        const name  = a.name || "Unknown";
        const genre = a.genre || "No genre set";
        const letter = firstLetter(name);
        const href = `artist.html?name=${slugify(name)}`;

        const card = document.createElement("a");
        card.className = "card-link";
        card.href = href;
        card.innerHTML = `
          <article class="card" aria-label="${name}">
            <div class="row">
              <div class="avatar">${letter}</div>
              <h2 class="name">${name}</h2>
            </div>
            <div class="genre">${genre}</div>
            <div class="chips">
              <span class="chip">Artist</span>
              <span class="chip">${genre || "Unknown"}</span>
            </div>
          </article>
        `;
        frag.appendChild(card);
      }
      container.appendChild(frag);

      // Update pager
      $("#pageInfo").textContent = `Page ${currentPage} of ${totalPages()}`;
      $("#prev").disabled = currentPage <= 1;
      $("#next").disabled = currentPage >= totalPages();
    }

    // ===== FETCH =====
    async function fetchArtists(){
      try{
        $("#refreshBtn").disabled = true;
        const res = await fetch(BACKEND_URL, { cache: "no-store" });
        const data = await res.json();
        rawData = Array.isArray(data) ? data : [];
        applyFilter($("#q").value);
        currentPage = 1;
        renderList();
      }catch(err){
        $("#list").innerHTML = `<p class="mono">Error: ${err?.message || err}</p>`;
      }finally{
        $("#refreshBtn").disabled = false;
      }
    }

    // ===== EVENTS =====
    $("#q").addEventListener("input", (e)=>{
      applyFilter(e.target.value);
      currentPage = 1;
      renderList();
    });

    $("#refreshBtn").addEventListener("click", fetchArtists);

    $("#prev").addEventListener("click", ()=>{
      if(currentPage > 1){ currentPage--; renderList(); }
    });

    $("#next").addEventListener("click", ()=>{
      if(currentPage < totalPages()){ currentPage++; renderList(); }
    });

    // Keyboard paging (left/right)
    window.addEventListener("keydown", (e)=>{
      if(e.key === "ArrowLeft"){ $("#prev").click(); }
      if(e.key === "ArrowRight"){ $("#next").click(); }
    });

    // ===== INIT =====
    fetchArtists();
  </script>
</body>
</html>